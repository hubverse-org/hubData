<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Load forecasts from zoltardata.com in hubverse format — collect_zoltar • hubData</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Load forecasts from zoltardata.com in hubverse format — collect_zoltar"><meta name="description" content="collect_zoltar retrieves data from a zoltardata.com project and
transforms it from Zoltar's native download format into a hubverse one. Zoltar (documentation
here) is a pre-hubverse research project that implements a repository of model
forecast results, including tools to administer, query, and visualize uploaded data, along with R and Python APIs to
access data programmatically (zoltr and
zoltpy, respectively.) (This hubData function is itself implemented using
the zoltr package.)"><meta property="og:description" content="collect_zoltar retrieves data from a zoltardata.com project and
transforms it from Zoltar's native download format into a hubverse one. Zoltar (documentation
here) is a pre-hubverse research project that implements a repository of model
forecast results, including tools to administer, query, and visualize uploaded data, along with R and Python APIs to
access data programmatically (zoltr and
zoltpy, respectively.) (This hubData function is itself implemented using
the zoltr package.)"><meta property="og:image" content="https://hubverse-org.github.io/hubData/logo.png"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">
    <a href="https://hubdocs.readthedocs.io/en/latest/" class="external-link"><img src="https://raw.githubusercontent.com/hubverse-org/hubStyle/main/inst/hubverse.png" id="logo" height="30" alt="hubverse"></a>
    <a class="navbar-brand me-2" href="../index.html">hubData</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.0.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"></ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/connect_hub.html">Accessing data from a hub</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/hubverse-org/hubData/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Load forecasts from zoltardata.com in hubverse format</h1>
      <small class="dont-index">Source: <a href="https://github.com/hubverse-org/hubData/blob/main/R/collect_zoltar.R" class="external-link"><code>R/collect_zoltar.R</code></a></small>
      <div class="d-none name"><code>collect_zoltar.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p><code>collect_zoltar</code> retrieves data from a <a href="https://zoltardata.com/" class="external-link">zoltardata.com</a> project and
transforms it from Zoltar's native download format into a hubverse one. Zoltar (documentation
<a href="https://docs.zoltardata.com/" class="external-link">here</a>) is a pre-hubverse research project that implements a repository of model
forecast results, including tools to administer, query, and visualize uploaded data, along with R and Python APIs to
access data programmatically (<a href="https://github.com/reichlab/zoltr/" class="external-link">zoltr</a> and
<a href="https://github.com/reichlab/zoltpy/" class="external-link">zoltpy</a>, respectively.) (This hubData function is itself implemented using
the zoltr package.)</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">collect_zoltar</span><span class="op">(</span></span>
<span>  <span class="va">project_name</span>,</span>
<span>  models <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  timezeros <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  units <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  targets <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  types <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  as_of <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  point_output_type <span class="op">=</span> <span class="st">"median"</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-project-name">project_name<a class="anchor" aria-label="anchor" href="#arg-project-name"></a></dt>
<dd><p>A string naming the Zoltar project to load forecasts from. Assumes the host is zoltardata.com .</p></dd>


<dt id="arg-models">models<a class="anchor" aria-label="anchor" href="#arg-models"></a></dt>
<dd><p>A character vector that specifies the models to query. Must be model abbreviations. Defaults to NULL,
which queries all models in the project.</p></dd>


<dt id="arg-timezeros">timezeros<a class="anchor" aria-label="anchor" href="#arg-timezeros"></a></dt>
<dd><p>A character vector that specifies the timezeros to query. Must be yyyy-mm-dd format. Defaults to
NULL, which queries all timezeros in the project.</p></dd>


<dt id="arg-units">units<a class="anchor" aria-label="anchor" href="#arg-units"></a></dt>
<dd><p>A character vector that specifies the units to query. Must be unit abbreviations. Defaults to NULL,
which queries all units in the project.</p></dd>


<dt id="arg-targets">targets<a class="anchor" aria-label="anchor" href="#arg-targets"></a></dt>
<dd><p>A character vector that specifies the targets to query. Must be target names. Defaults to NULL,
which queries all targets in the project.</p></dd>


<dt id="arg-types">types<a class="anchor" aria-label="anchor" href="#arg-types"></a></dt>
<dd><p>A character vector that specifies the forecast types to query. Choices are "bin", "point", "sample",
"quantile", "mean", and "median". Defaults to NULL, which queries all types in the project. Note: While Zoltar
supports "named" and "mode" forecasts, this function ignores them.</p></dd>


<dt id="arg-as-of">as_of<a class="anchor" aria-label="anchor" href="#arg-as-of"></a></dt>
<dd><p>A datetime string that specifies the forecast version. The datetime must include timezone information
for disambiguation, without which the query will fail. The datatime parsing function used below (<code><a href="https://rdrr.io/r/base/strptime.html" class="external-link">base::strftime</a></code>)
is extremely lenient when it comes to formatting, so please exercise caution. Defaults to NULL to load the latest
version.</p></dd>


<dt id="arg-point-output-type">point_output_type<a class="anchor" aria-label="anchor" href="#arg-point-output-type"></a></dt>
<dd><p>A string that specifies how to convert zoltar <code>point</code> forecast data to hubverse output type.
Must be either "median" or "mean". Defaults to "median".</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A hubverse model_out_tbl containing the following columns: "model_id", "timezero", "season", "unit",
"horizon", "target", "output_type", "output_type_id", and "value".</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>Zoltar's data model differs from that of the hubverse in a few important ways. While Zoltar's model has the
concepts of unit, target, and timezero, hubverse projects have hub-configurable columns, which makes the mapping
from the former to the latter imperfect. In particular, Zoltar units translate roughly to hubverse task IDs, Zoltar
targets include both the target outcome and numeric horizon in the target name, and Zoltar timezeros map to round
ids. Finally, Zoltar's forecast types differ from those of the hubverse. Whereas Zoltar has seven types (bin,
named, point, sample, quantile, mean, median, and mode), the hubverse has six (cdf, mean, median, pmf, quantile,
sample), only some of which overlap.</p>
<p>Additional notes:</p><ul><li><p>Requires the user to have a Zoltar account (use the <a href="https://zoltardata.com/about" class="external-link">Zoltar contact page</a>
to request one).</p></li>
<li><p>Requires <code>Z_USERNAME</code> and <code>Z_PASSWORD</code> environment vars to be set to those of the user's Zoltar account.</p></li>
<li><p>While Zoltar supports "named" and "mode" forecasts, this function ignores them.</p></li>
<li><p>Rows with non-numeric values are ignored.</p></li>
<li><p>This function removes numeric_horizon mentions from zoltar target names. Target names can contain a maximum of
one numeric_horizon. Example: "1 wk ahead inc case" -&gt; "wk ahead inc case".</p></li>
<li><p>Querying a large number of rows may cause errors, so we recommend providing one or more filtering arguments
(e.g., models, timezeros, etc.) to limit the result.</p></li>
</ul></div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="va">df</span> <span class="op">&lt;-</span> <span class="fu">collect_zoltar</span><span class="op">(</span><span class="st">"Docs Example Project"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">df</span> <span class="op">&lt;-</span></span></span>
<span class="r-in"><span>  <span class="fu">collect_zoltar</span><span class="op">(</span><span class="st">"Docs Example Project"</span>, models <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"docs_mod"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                        timezeros <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"2011-10-16"</span><span class="op">)</span>, units <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"loc1"</span>, <span class="st">"loc3"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                        targets <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"pct next week"</span>, <span class="st">"cases next week"</span><span class="op">)</span>, types <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"point"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                        as_of <span class="op">=</span> <span class="cn">NULL</span>, point_output_type <span class="op">=</span> <span class="st">"mean"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Anna Krystalli.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.0. PR Previews built by <a href="https://www.netlify.com" class="external-link">Netlify</a>. Provided without <strong>any warranty</strong>.</p>
</div>

    </footer></div>





  </body></html>

