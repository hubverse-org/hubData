% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/utils-hive-partitions.R
\name{extract_hive_partitions}
\alias{extract_hive_partitions}
\title{Extract Hive-style partition key-value pairs from a path}
\usage{
extract_hive_partitions(path, strict = TRUE)
}
\arguments{
\item{path}{A character string of length 1: the path to a file or directory.}

\item{strict}{Logical. If \code{TRUE}, invalid partition segments (e.g., \verb{=value}, or just \code{=})
will trigger an error. If \code{FALSE}, only valid \code{key=value} components are returned.}
}
\value{
A named character vector where the names are partition keys and the values
are decoded values. Returns \code{NULL} if no valid partitions are found.
}
\description{
Given a filesystem path, this function extracts Hive-style partition
key-value pairs (i.e., path components formatted as \code{key=value}). It supports
decoding URL-encoded values (e.g., \code{"wk\%20flu"} â†’ \code{"wk flu"}), and handles
empty values (e.g., \code{"key="}) as \code{NA}, consistent with Hive and Arrow semantics.
}
\details{
If \code{strict = TRUE}, the function will abort with a detailed error message
if any malformed partition-like segments are found.
}
\examples{
extract_hive_partitions("data/country=US/year=2024/file.parquet")
extract_hive_partitions("data/country=/year=2024/", strict = TRUE)
# extract_hive_partitions("data/=US/year=2024/", strict = TRUE) # This will error
}
\seealso{
\code{\link[=is_hive_partitioned_path]{is_hive_partitioned_path()}}
}
